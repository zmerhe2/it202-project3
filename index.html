<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
      max-width: 500px;
      width: 50%;
      max-height: 500px;
      height: 80%;
      border: 1px solid blue;
    }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>



    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet" type="text/css" />
  </head>



  <body>

    <div id="map"></div>



<!--<div class="row" id="ROW" style="width: 28rem;">-->

		 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		 <div class="container">
      <ul class="mdc-list" aria-orientation="vertical">
          
          
            
          <li class="mdc-list-item">
            <div class="row">
              
              <!--<p></p>-->
              </div>
            <span class="mdc-list-item__meta material-icons" arial-hidden="true"></span>
            <button data-mdc-auto-init="MDCIconButtonToggle" id="add-to-favorites"
            class="mdc-icon-button"
            aria-label="Add to favorites"
            aria-hidden="true"
            aria-pressed="false">
            <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">favorite</i>
            <i class="material-icons mdc-icon-button__icon">favorite_border</i>
          </button>
          </li>
          </div>
          </div>
          
        </ul>
        </div>



<!--</div>-->

<div class="container">

    <div class="col-sm">
      <h3> Library Name:</h3>
    </div>

    
  </div>
</div>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>


    <!-- at the bottom of the page -->
    <script type="text/javascript">
      window.mdc.autoInit();



    document.getElementById("add-to-favorites").addEventListener('MDCIconButtonToggle:change', ({detail}) => {
      console.log(detail);
    });

      $("button").on("click", function(e) {
      
        if ($(this).find("i.mdc-icon-button__icon--on").css("display") == "none") {
          console.log("it's off");
        } else {
          console.log("it's on");
        }
      });



    </script>


    <script>


          $(document).ready(function(){
          $.get("https://data.cityofchicago.org/resource/psqp-6rmg.json", function(response) {
            console.log(response);
            var row = $("<div>").addClass("row");

            $.each(response, function(i,v) {
                console.log(i,v);
                var cell = $("<div>");
                cell.addClass("col-sm");
                cell.html("<br>" + v.address + "<br>" + v.name_  );
                
                
                row.append(cell);
                
                if (row.find("div").length == 3) {
                  $(".container").append(row);
                  row = $("<div>").addClass("row");
                }            
            });

            if (row.find("div").length != 0) {
                  $(".container").append(row);
            }            


          });
        });




    </script>

  


    <script>
      //Map View
      //Displays map of all favorited locations & 
      //user's current location


      function initMap() {
        var chicago = {lat: 41.8781, lng: -87.6298};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: chicago
        });

        $.ajax({
              url: "https://data.cityofchicago.org/resource/psqp-6rmg.json",
              type: "GET",
              data: {
                "$limit" : 50
              }
          }).done(function(data) {
            //alert("Retrieved " + data.length + " records from the dataset!");
            console.log(data);


                /*$.each(response, function(i,v) {
                console.log(i,v);
                var cell = $("<div>");
                cell.addClass("col-sm");
                cell.html(v.name_ + "<br>" + v.name_);
                
                row.append(cell);*/



            $.each(response, function(i,v) {
                                   
                  var marker = new google.maps.Marker({
                            position: {lat: parseFloat(v.location), lng: parseFloat(v.location)},
                            map: map,
                            title: 'Chicago'
                          });
              
                  var infowindow = new google.maps.InfoWindow({
                    content: "<h1>" + v.name_ + "</h1>"
                  });

                  marker.addListener('click', function() {
                    infowindow.open(map, marker);
                  });


            });

          });

      }
    </script>
    
    
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA23qcXuGK77p1Smzt7qKsJsMF61TMvDaY&callback=initMap">
    </script>
      

  
  </script>









  </body>
</html>